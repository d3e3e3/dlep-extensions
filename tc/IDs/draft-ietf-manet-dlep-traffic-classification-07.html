<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>DLEP Traffic Classification Data Item</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
      /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
      a.info {
          /* This is the key. */
          position: relative;
          z-index: 24;
          text-decoration: none;
      }
      a.info:hover {
          z-index: 25;
          color: #FFF; background-color: #900;
      }
      a.info span { display: none; }
      a.info:hover span.info {
          /* The span will display just on :hover state. */
          display: block;
          position: absolute;
          font-size: smaller;
          top: 2em; left: -5em; width: 15em;
          padding: 2px; border: 1px solid #333;
          color: #900; background-color: #EEE;
          text-align: left;
      }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  max-width: 55em;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Key Words">
<link href="#rfc.section.2" rel="Chapter" title="2 Traffic Classification">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Traffic Classification Data Item">
<link href="#rfc.section.2.1.1" rel="Chapter" title="2.1.1 Traffic Classification Sub-Data Item">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 DiffServ Traffic Classification Sub-Data Item">
<link href="#rfc.section.2.2.1" rel="Chapter" title="2.2.1 Router Receive Processing">
<link href="#rfc.section.2.3" rel="Chapter" title="2.3 Ethernet Traffic Classification Sub-Data Item">
<link href="#rfc.section.2.3.1" rel="Chapter" title="2.3.1 Router Receive Processing">
<link href="#rfc.section.3" rel="Chapter" title="3 Compatibility">
<link href="#rfc.section.4" rel="Chapter" title="4 Security Considerations">
<link href="#rfc.section.5" rel="Chapter" title="5 IANA Considerations">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Data Item Values">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 DLEP Traffic Classification Sub-Data Item Registry">
<link href="#rfc.references" rel="Chapter" title="6 References">
<link href="#rfc.references.1" rel="Chapter" title="6.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="6.2 Informative References">
<link href="#rfc.appendix.A" rel="Chapter" title="A Acknowledgments">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content="xml2rfc version 3.3.0 - https://tools.ietf.org/tools/xml2rfc" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />

  <meta name="dct.creator" content="Cheng, B., Wiggins, D., and L. Berger" />
  <meta name="dct.identifier" content="urn:ietf:id:draft-ietf-manet-dlep-traffic-classification-07" />
  <meta name="dct.issued" scheme="ISO8601" content="2022-24" />
  <meta name="dct.abstract" content="This document defines a new Dynamic Link Exchange Protocol (DLEP) Data Item that is used to support traffic classification.  Traffic classification information is used to identify traffic flows based on frame/packet content such as destination address.  The Data Item is defined in an extensible and reusable fashion. Its use will be mandated in other documents defining specific DLEP extensions.  This document also introduces DLEP Sub-Data Items, and Sub-Data Items are defined to support DiffServ and Ethernet traffic classification.   " />
  <meta name="description" content="This document defines a new Dynamic Link Exchange Protocol (DLEP) Data Item that is used to support traffic classification.  Traffic classification information is used to identify traffic flows based on frame/packet content such as destination address.  The Data Item is defined in an extensible and reusable fashion. Its use will be mandated in other documents defining specific DLEP extensions.  This document also introduces DLEP Sub-Data Items, and Sub-Data Items are defined to support DiffServ and Ethernet traffic classification.   " />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">B. Cheng</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">D. Wiggins</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">MIT Lincoln Laboratory</td>
</tr>
<tr>
<td class="left">Expires: August 28, 2022</td>
<td class="right">L. Berger</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">LabN Consulting, L.L.C.</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">February 24, 2022</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">DLEP Traffic Classification Data Item<br />
  <span class="filename">draft-ietf-manet-dlep-traffic-classification-07</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document defines a new Dynamic Link Exchange Protocol (DLEP) Data Item that is used to support traffic classification.  Traffic classification information is used to identify traffic flows based on frame/packet content such as destination address.  The Data Item is defined in an extensible and reusable fashion. Its use will be mandated in other documents defining specific DLEP extensions.  This document also introduces DLEP Sub-Data Items, and Sub-Data Items are defined to support DiffServ and Ethernet traffic classification.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of This Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet-Drafts is at https://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on August 28, 2022.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2022 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (https://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<ul><li>1.1.   <a href="#rfc.section.1.1">Key Words</a>
</li>
</ul><li>2.   <a href="#rfc.section.2">Traffic Classification</a>
</li>
<ul><li>2.1.   <a href="#rfc.section.2.1">Traffic Classification Data Item</a>
</li>
<ul><li>2.1.1.   <a href="#rfc.section.2.1.1">Traffic Classification Sub-Data Item</a>
</li>
</ul><li>2.2.   <a href="#rfc.section.2.2">DiffServ Traffic Classification Sub-Data Item</a>
</li>
<ul><li>2.2.1.   <a href="#rfc.section.2.2.1">Router Receive Processing</a>
</li>
</ul><li>2.3.   <a href="#rfc.section.2.3">Ethernet Traffic Classification Sub-Data Item</a>
</li>
<ul><li>2.3.1.   <a href="#rfc.section.2.3.1">Router Receive Processing</a>
</li>
</ul></ul><li>3.   <a href="#rfc.section.3">Compatibility</a>
</li>
<li>4.   <a href="#rfc.section.4">Security Considerations</a>
</li>
<li>5.   <a href="#rfc.section.5">IANA Considerations</a>
</li>
<ul><li>5.1.   <a href="#rfc.section.5.1">Data Item Values</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">DLEP Traffic Classification Sub-Data Item Registry</a>
</li>
</ul><li>6.   <a href="#rfc.references">References</a>
</li>
<ul><li>6.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>6.2.   <a href="#rfc.references.2">Informative References</a>
</li>
</ul><li>Appendix A.   <a href="#rfc.appendix.A">Acknowledgments</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#sec-1" id="sec-1">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">The Dynamic Link Exchange Protocol (DLEP) is defined in <a href="#RFC8175" class="xref">[RFC8175]</a>.  It provides the exchange of link related control information between DLEP peers.  DLEP peers are comprised of a modem and a router.  DLEP defines a base set of mechanisms as well as support for possible extensions.  DLEP defines Data Items which are sets of information that can be reused in DLEP messaging.  The base DLEP specification does not include any flow identification beyond DLEP endpoints.  This document defines DLEP Data Item formats which provide flow identification on a more granular basis.  Specifically it enables a router to use traffic flow classification information provided by the modem to identify traffic flows.  In this case, a flow is identified based on information found in a data plane header and one or more matches are associated with a single flow.  (For general background on traffic classification see <a href="#RFC2475" class="xref">[RFC2475]</a> Section 2.3.)  The Data Item is structured to allow for use of the defined traffic classification information with applications such as credit window control as specified in <a href="#I-D.ietf-manet-dlep-da-credit-extension" class="xref">[I-D.ietf-manet-dlep-da-credit-extension]</a> </p>
<p id="rfc.section.1.p.2">This document defines traffic classification based on a DLEP destination and flows identified by either DiffServ <a href="#RFC2475" class="xref">[RFC2475]</a> DSCPs (differentiated services codepoints) or IEEE 802.1Q <a href="#IEEE.802.1Q_2014" class="xref">[IEEE.802.1Q_2014]</a> Ethernet Priority Code Points (PCP).  The defined mechanism allows for flows to be described in a flexible fashion and when combined with applications such as credit window control, allows credit windows to be shared across traffic sent to multiple DLEP destinations and as part of multiple flows, or used exclusively for traffic sent to a particular destination and/or belonging to a particular flow.  The extension also supports the "wildcard" matching of any flow (DSCP or PCP).  Traffic classification information is provided such that it can be readily extended to support other traffic classification techniques, or be used by non-credit window related extensions, such as <a href="#RFC8651" class="xref">[RFC8651]</a> or even 5-tuple IP flows.  </p>
<p id="rfc.section.1.p.3">This document defines support for traffic classification using a single new Data Item in <a href="#sec-di-tc" class="xref">Section 2.1</a> for general support and two new Sub-Data Items are defined to support identification of flows based on DSCPs and PCPs.  </p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> <a href="#sec-1.1" id="sec-1.1">Key Words</a>
</h1>
<p id="rfc.section.1.1.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in BCP 14 <a href="#RFC2119" class="xref">[RFC2119]</a> <a href="#RFC8174" class="xref">[RFC8174]</a> when, and only when, they appear in all capitals, as shown here.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#sec-tc" id="sec-tc">Traffic Classification</a>
</h1>
<p id="rfc.section.2.p.1">The Traffic Classification Data Item is used to represent a list of flows that may be used at the same time for traffic sent from a router to a modem.  The data plane information used to identify each flow is represented in a separate Sub-Data Item.  The Data Item and Sub-Data Item structure is intended to be independent of any specific usage of the flow identification, e.g., flow control.  The Sub-Data Item structure is also intended to allow for future traffic classification types, e.g., 5-tuple flows.  While the structure of the Data Items is extensible, actual flow information is expected to be used in an extension dependent manner. Support for DSCP and PCP-based flows are defined via individual Sub-Data Items below. Other types of flow identification, e.g., based on IP protocol and ports, may be defined in the future via new Sub-Data Items.  Note that when extensions supporting multiple Sub-Data Item types are negotiated, these types MAY be combined in a single Data Item.  </p>
<p id="rfc.section.2.p.2">Each list of flows is identified using a "Traffic Classification Identifier" or "TID" and is expected to represent a valid combination of data plane identifiers that may be used at the same time.  Each flow is identified via a "Flow Identifier" or "FID".  Each FID is defined in a Sub-Data Item which carries the data plane identifier or identifiers used to associate traffic with the flow.  A DLEP destination address is also needed to complete traffic classification information used in extensions such as flow control.  This information is expected to be provided in an extension specific manner.  For example, this address can be provided by a modem when it identifies the traffic classification set in a Destination Up Message using the Credit Window Associate Data Item defined in <a href="#I-D.ietf-manet-dlep-credit-flow-control" class="xref">[I-D.ietf-manet-dlep-credit-flow-control]</a>.  TID and FID values have modem-local scope.  </p>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> <a href="#sec-di-tc" id="sec-di-tc">Traffic Classification Data Item</a>
</h1>
<p id="rfc.section.2.1.p.1">This sections defines the Traffic Classification Data Item.  This Data Item is used by a modem to provide a router with traffic classification information.  When an extension requires use of this Data Item the Traffic Classification Data Item SHOULD be included by a modem in any Session Initialization Response Message, e.g., see <a href="#I-D.ietf-manet-dlep-da-credit-extension" class="xref">[I-D.ietf-manet-dlep-da-credit-extension]</a>.  Updates to previously provided traffic classifications or new traffic classifications MAY be sent by a modem by including the Data Item in Session Update Messages.  More than one Data Item MAY be included in a message to provide information on multiple traffic classifiers.  </p>
<p id="rfc.section.2.1.p.2">The set of traffic classification information provided in the data item is identified using a Traffic Classification Identifier, or TID.  The actual data plane related information used in traffic classification is provided in a variable list of Traffic Classification Sub-Data Items.  </p>
<p id="rfc.section.2.1.p.3">The format of the Traffic Classification Data Item is: </p>
<pre>
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | Data Item Type                | Length                        |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |Traffic Class. Identifier (TID)|   Num SDIs    |   Reserved    |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |           Traffic Classification Sub-Data Item 1              |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    :                                ...                            :
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |           Traffic Classification Sub-Data Item n              |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
<p></p>
<p></p>

<dl>
<dt>Data Item Type:</dt>
<dd style="margin-left: 8">TBA1</dd>
<dt>Length:</dt>
<dd style="margin-left: 8">Variable <br><br> Per <a href="#RFC8175" class="xref">[RFC8175]</a> Length is the number of octets in the Data Item, excluding the Type and Length fields.  </dd>
<dt> Traffic Classification Identifier (TID):</dt>
<dd style="margin-left: 8">
<br><br> A 16-bit unsigned integer identifying a traffic classification set.  There is no restriction on values used by a modem, and there is no requirement for sequential or ordered values.  </dd>
<dt>Num SDIs:</dt>
<dd style="margin-left: 8">
<br><br> An 8-bit unsigned integer indicating the number of Traffic Classification Sub-Data Items included in the Data Item.  A value of zero (0) is allowed and indicates that no traffic should be matched against this TID.  </dd>
<dt>Reserved:</dt>
<dd style="margin-left: 8">
<br><br> MUST be set to zero by the sender (a modem) and ignored by the receiver (a router).  </dd>
<dt>Traffic Classification Sub-Data Item:</dt>
<dd style="margin-left: 8">
<br><br> Zero or more Traffic Classification Sub-Data Items of the format defined below MAY be included.  The number MUST match the value carried in the Num SDIs field.  </dd>
</dl>

<p> </p>
<p id="rfc.section.2.1.p.6">A router receiving the Traffic Classification Data Item MUST locate the traffic classification information that is associated with the TID indicated in each received Data Item.  If no associated traffic classification information is found, the router MUST initialize a new information set using the values carried in the Data Item.  When associated traffic classification information is found, the router MUST replace the corresponding information using the values carried in the Data Item.  In both cases, a router MUST also ensure that any data plane state, e.g., <a href="#I-D.ietf-manet-dlep-credit-flow-control" class="xref">[I-D.ietf-manet-dlep-credit-flow-control]</a>, that is associated with the TID is updated as needed.  </p>
<h1 id="rfc.section.2.1.1">
<a href="#rfc.section.2.1.1">2.1.1.</a> <a href="#sec-di-tc-sub" id="sec-di-tc-sub">Traffic Classification Sub-Data Item</a>
</h1>
<p id="rfc.section.2.1.1.p.1">All Traffic Classification Sub-Data Items share a common format that is patterned after the standard DLEP Data Item format, see <a href="#RFC8175" class="xref">[RFC8175]</a> Section 11.3.  There is no requirement on, or meaning to Sub-Data Item ordering.  Any errors or inconsistencies encountered in parsing Sub-Data Items are handled in the same fashion as any other Data Item parsing error encountered in DLEP.  </p>
<p id="rfc.section.2.1.1.p.2">The format of the Traffic Classification Sub-Data Item is: </p>
<pre>
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | Sub-Data Item Type            | Length                        |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                           Value...                            :
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
          </pre>
<p></p>
<p></p>

<dl>
<dt>Sub-Data Item Type:</dt>
<dd style="margin-left: 8">
<br><br> A 16-bit unsigned integer that indicates the type and corresponding format of the Sub-Data Item's Value field.  Sub-Data Item Types are scoped within the Data Item in which they are carried, i.e., the Sub-Data Item Type field MUST be used together with the Traffic Classification Data Item Type to identify the format of the Sub-Data Item.  Traffic Classification Sub-Data Item Types are managed according to the IANA registry described in <a href="#sec-iana-sdi" class="xref">Section 5.2</a>.  </dd>
<dt>Length:</dt>
<dd style="margin-left: 8">Variable <br><br> Copying <a href="#RFC8175" class="xref">[RFC8175]</a>, Length is a 16-bit unsigned integer that is the number of octets in the Sub-Data Item, excluding the Type and Length fields.  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> <a href="#sec-di-tc-ds-sub" id="sec-di-tc-ds-sub">DiffServ Traffic Classification Sub-Data Item</a>
</h1>
<p id="rfc.section.2.2.p.1">The DiffServ Traffic Classification Sub-Data Item is used to identify the set of DSCPs that should be treated as a single flow, i.e., receive the same traffic treatment.  DSCPs are identified in a list of DiffServ fields.  An implementation that does not support DSCPs and wants the same traffic treatment for all traffic to a destination or destinations would indicate 0 DSCPs.  </p>
<p id="rfc.section.2.2.p.2">The format of the DiffServ Traffic Classification Sub-Data Item is: </p>
<pre>
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | Must be one (1)               | Length                        |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | Flow Identifier (FID)         |   Num DSCPs   |   DS Field 1  |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |   DS Field 2  |      ...      |   DS Field n  |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
<p></p>
<pre>
            0   1   2   3   4   5   6   7
          +---+---+---+---+---+---+---+---+
          |         DSCP          |  MBZ  |
          +---+---+---+---+---+---+---+---+

            DSCP: differentiated services codepoint
            MBZ:  MUST be zero
            </pre>
<p></p>

<dl>
<dt>Length:</dt>
<dd style="margin-left: 8">Variable <br><br> Length is defined above.  For this Sub-Data Item, it is equal to three (3) plus the value of the Num DSCPs field.  </dd>
<dt>Flow Identifier (FID):</dt>
<dd style="margin-left: 8">
<br><br> A 16-bit unsigned integer representing the data plane information carried in the Sub-Data Item that is to be used in identifying a flow.  The value of 0xFFFF is reserved and MUST NOT be used in this field.  </dd>
<dt>Num DSCPs:</dt>
<dd style="margin-left: 8">
<br><br> An 8-bit unsigned integer indicating the number of DSCPs carried in the Sub-Data Item.  A zero (0) indicates a (wildcard) match against any DSCP value.  </dd>
<dt>DS Field:</dt>
<dd style="margin-left: 8">
<br><br> Each DS Field is an 8-bit that carries the DSCP field defined in <a href="#RFC2474" class="xref">[RFC2474]</a>.  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.2.2.1">
<a href="#rfc.section.2.2.1">2.2.1.</a> <a href="#sec-di-tc-rrp" id="sec-di-tc-rrp">Router Receive Processing</a>
</h1>
<p id="rfc.section.2.2.1.p.1">A router receiving the Traffic Classification Sub-Data Item MUST validate the information on receipt, prior to using the carried information, including potentially updating the data behavior as determined by the extension requiring the use of the Sub-Data Item.  Validation failures MUST be treated as an error as described above.  </p>
<p id="rfc.section.2.2.1.p.2">Once validated, the receiver MUST ensure that each DS Field value is listed only once across the whole Traffic Classification Data Item.  Note, this check is across the Data Item and not the individual Sub-Data Item.  If the same DS Field value is listed more than once within the same Traffic Classification Data Item, the Data Item MUST be treated as an error as described above.  </p>
<h1 id="rfc.section.2.3">
<a href="#rfc.section.2.3">2.3.</a> <a href="#sec-di-tc-e-sub" id="sec-di-tc-e-sub">Ethernet Traffic Classification Sub-Data Item</a>
</h1>
<p id="rfc.section.2.3.p.1">The Ethernet Traffic Classification Sub-Data Item is used to identify the VLAN and PCPs that should be treated as a single flow, i.e., receive the same traffic treatment.  Ethernet Priority Code Point support is defined as part of the IEEE 802.1Q <a href="#IEEE.802.1Q_2014" class="xref">[IEEE.802.1Q_2014]</a> tag format and includes a 3 bit "PCP" field.  The tag format also includes a 12 bit VLAN identifier (VID) field. PCPs are identified in a list of priority fields.  An implementation that does not support PCPs and wants the same traffic treatment for all traffic to a destination or destinations would indicate 0 PCPs.  Such an implementation could identify a VLAN to use per destination.  </p>
<p id="rfc.section.2.3.p.2">The format of the Ethernet Traffic Classification Sub-Data Item is: </p>
<pre>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | Must be two (2)               | Length                        |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | Flow Identifier (FID)         |NumPCPs| VLAN Identifier (VID) |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | Pri. 1| Pri. 2| ..... | ..... | ..... |  Pad  |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        </pre>
<p></p>
<pre>
        0   1   2   3
        +---+---+---+---+
        |    PCP    |MBZ|
        +---+---+---+---+

        PCP: Priority code point
        MBZ: MUST be zero
            </pre>
<p></p>

<dl>
<dt>Length:</dt>
<dd style="margin-left: 8">Variable <br><br> Length is defined above.  For this Sub-Data Item, it is equal to four (4) plus the number of octets needed to accommodate the number of Priority fields indicated by the NumPCPs field. Note that as length is in octets and each Priority field is 4 bits, the additional length is the value carried in the NumPCPs field divided by two and rounded up to the next higher integer quantity.  </dd>
<dt>Flow Identifier (FID):</dt>
<dd style="margin-left: 8">
<br><br> A 16-bit unsigned integer representing the data plane information carried in the Sub-Data Item that is to be used in identifying a flow.  The value of 0xFFFF is reserved and MUST NOT be used in this field.  </dd>
<dt>Num PCPs:</dt>
<dd style="margin-left: 8">
<br><br> A 4-bit unsigned integer indicating the number of Priority fields carried in the Sub-Data Item.  A zero (0) indicates a (wildcard) match against any PCP value.  </dd>
<dt>VLAN identifier (VID):</dt>
<dd style="margin-left: 8">
<br><br> A 12-bit unsigned integer field indicating the VLAN to be used in traffic classification.  A value of zero (0) indicates that the VID is to be ignored and any VID is to be accepted during traffic classification.  </dd>
<dt>Priority:</dt>
<dd style="margin-left: 8">
<br><br> Each Priority Field is 4-bits long and indicates a PCP field defined in <a href="#IEEE.802.1Q_2014" class="xref">[IEEE.802.1Q_2014]</a>. Note that zero (0) is a valid value for either PCP.  </dd>
<dt>Pad:</dt>
<dd style="margin-left: 8">
<br><br> A 4-bit long field included when NumPCPs is an odd number.  This field MUST be set to zero by the sender, and MUST be ignored on receipt.  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.2.3.1">
<a href="#rfc.section.2.3.1">2.3.1.</a> <a href="#sec-di-tc-q-rrp" id="sec-di-tc-q-rrp">Router Receive Processing</a>
</h1>
<p id="rfc.section.2.3.1.p.1">A router receiving the Traffic Classification Sub-Data Item MUST validate the information on receipt, prior to the using the carried information, including potentially updating the data behavior as determined by the extension requiring the use of the Sub-Data Item.  Validation failures MUST be treated as an error as described above.  </p>
<p id="rfc.section.2.3.1.p.2">Once validated, the receiver MUST ensure that each Priority Field value is listed only once across the whole Traffic Classification Data Item.  Note, this check is across the Data Item and not the individual Sub-Data Item.  If the same Priority Field value is listed more than once within the same Traffic Classification Data Item, the Data Item MUST be treated as an error as described above.  </p>
<p id="rfc.section.2.3.1.p.3">If a packet matches both a DSCP Field Value,see <a href="#sec-di-tc-ds-sub" class="xref">Section 2.2</a> and a Priority Field value, the DSCP associated TID MUST take precedence.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#sec-compat" id="sec-compat">Compatibility</a>
</h1>
<p id="rfc.section.3.p.1">The formats defined in this document will only be used when extensions require their use.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#sec-sec" id="sec-sec">Security Considerations</a>
</h1>
<p id="rfc.section.4.p.1">This document introduces finer grain flow identification mechanisms to DLEP.  These mechanisms do not inherently introduce any additional vulnerabilities above those documented in <a href="#RFC8175" class="xref">[RFC8175]</a>.  The approach taken to Security in that document applies equally to the mechanism defined in this document.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#sec-iana" id="sec-iana">IANA Considerations</a>
</h1>
<p id="rfc.section.5.p.1">This document requests the assignment of several values by IANA.  All assignments are to registries defined by <a href="#RFC8175" class="xref">[RFC8175]</a>.  </p>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> <a href="#sec-iana-di" id="sec-iana-di">Data Item Values</a>
</h1>
<p id="rfc.section.5.1.p.1">This document requests the following new assignments to the DLEP Data Item Registry named "Data Item Type Values" in the range with the "Specification Required" policy.  The requested values are as follows: </p>
<div id="rfc.table.1"></div>
<div id="table_di"></div>
<p></p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>Requested Data Item Values</caption>
<thead><tr>
<th class="left">Type Code</th>
<th class="left">Description</th>
</tr></thead>
<tbody><tr>
<td class="left">TBA1</td>
<td class="left">Traffic Classification</td>
</tr></tbody>
</table>
<p></p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> <a href="#sec-iana-sdi" id="sec-iana-sdi">DLEP Traffic Classification Sub-Data Item Registry</a>
</h1>
<p id="rfc.section.5.2.p.1">Upon approval of this document, IANA is requested to create a new DLEP registry, named "Traffic Classification Sub-Data Item Type Values".  </p>
<p id="rfc.section.5.2.p.2">The following table provides initial registry values and the <a href="#RFC8126" class="xref">[RFC8126]</a> defined policies that should apply to the registry: </p>
<div id="rfc.table.2"></div>
<div id="table_tc_sdi"></div>
<p></p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>Initial Registry Values</caption>
<thead><tr>
<th class="left">Type Code</th>
<th class="left">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">0</td>
<td class="left">Reserved</td>
</tr>
<tr>
<td class="left">1</td>
<td class="left">DiffServ Traffic Classification</td>
</tr>
<tr>
<td class="left">2</td>
<td class="left">Ethernet Traffic Classification</td>
</tr>
<tr>
<td class="left">3-65407</td>
<td class="left">Specification Required</td>
</tr>
<tr>
<td class="left">65408-65534</td>
<td class="left">Private Use</td>
</tr>
<tr>
<td class="left">65535</td>
<td class="left">Reserved</td>
</tr>
</tbody>
</table>
<p></p>
<h1 id="rfc.references">
<a href="#rfc.references">6.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">6.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a>Bradner, S.</a>, "<a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC8174">[RFC8174]</b></td>
<td class="top">
<a>Leiba, B.</a>, "<a href="https://tools.ietf.org/html/rfc8174">Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</a>", BCP 14, RFC 8174, DOI 10.17487/RFC8174, May 2017.</td>
</tr>
<tr>
<td class="reference"><b id="RFC8175">[RFC8175]</b></td>
<td class="top">
<a>Ratliff, S.</a>, <a>Jury, S.</a>, <a>Satterwhite, D.</a>, <a>Taylor, R.</a> and <a>B. Berry</a>, "<a href="https://tools.ietf.org/html/rfc8175">Dynamic Link Exchange Protocol (DLEP)</a>", RFC 8175, DOI 10.17487/RFC8175, June 2017.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">6.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I-D.ietf-manet-dlep-credit-flow-control">[I-D.ietf-manet-dlep-credit-flow-control]</b></td>
<td class="top">
<a title="MIT Lincoln Laboratory">Cheng, B.</a>, <a title="MIT Lincoln Laboratory">Wiggins, D.</a>, <a title="LabN Consulting, L.L.C.">Berger, L.</a> and <a>S. Ratliff</a>, "<a href="https://tools.ietf.org/html/draft-ietf-manet-dlep-credit-flow-control-09">DLEP Credit-Based Flow Control Messages and Data Items</a>", Internet-Draft draft-ietf-manet-dlep-credit-flow-control-09, October 2021.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-manet-dlep-da-credit-extension">[I-D.ietf-manet-dlep-da-credit-extension]</b></td>
<td class="top">
<a title="MIT Lincoln Laboratory">Cheng, B.</a>, <a title="MIT Lincoln Laboratory">Wiggins, D.</a> and <a title="LabN Consulting, L.L.C.">L. Berger</a>, "<a href="https://tools.ietf.org/html/draft-ietf-manet-dlep-da-credit-extension-12">DLEP DiffServ Aware Credit Window Extension</a>", Internet-Draft draft-ietf-manet-dlep-da-credit-extension-12, July 2021.</td>
</tr>
<tr>
<td class="reference"><b id="IEEE.802.1Q_2014">[IEEE.802.1Q_2014]</b></td>
<td class="top">
<a>IEEE</a>, "<a href="http://ieeexplore.ieee.org/servlet/opac?punumber=6991460">IEEE Standard for Local and metropolitan area networks--Bridges and Bridged Networks</a>", IEEE 802.1Q-2014, DOI 10.1109/ieeestd.2014.6991462, December 2014.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2474">[RFC2474]</b></td>
<td class="top">
<a>Nichols, K.</a>, <a>Blake, S.</a>, <a>Baker, F.</a> and <a>D. Black</a>, "<a href="https://tools.ietf.org/html/rfc2474">Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers</a>", RFC 2474, DOI 10.17487/RFC2474, December 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2475">[RFC2475]</b></td>
<td class="top">
<a>Blake, S.</a>, <a>Black, D.</a>, <a>Carlson, M.</a>, <a>Davies, E.</a>, <a>Wang, Z.</a> and <a>W. Weiss</a>, "<a href="https://tools.ietf.org/html/rfc2475">An Architecture for Differentiated Services</a>", RFC 2475, DOI 10.17487/RFC2475, December 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC8126">[RFC8126]</b></td>
<td class="top">
<a>Cotton, M.</a>, <a>Leiba, B.</a> and <a>T. Narten</a>, "<a href="https://tools.ietf.org/html/rfc8126">Guidelines for Writing an IANA Considerations Section in RFCs</a>", BCP 26, RFC 8126, DOI 10.17487/RFC8126, June 2017.</td>
</tr>
<tr>
<td class="reference"><b id="RFC8651">[RFC8651]</b></td>
<td class="top">
<a>Cheng, B.</a>, <a>Wiggins, D.</a> and <a>L. Berger</a>, "<a href="https://tools.ietf.org/html/rfc8651">Dynamic Link Exchange Protocol (DLEP) Control-Plane-Based Pause Extension</a>", RFC 8651, DOI 10.17487/RFC8651, October 2019.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.A">
<a href="#rfc.appendix.A">Appendix A.</a> Acknowledgments</h1>
<p id="rfc.section.A.p.1">The Sub-Data Item format was inspired by Rick Taylor's "Data Item Containers".  He also proposed the separation of credit windows from traffic classification at IETF98. Many useful comments were received from contributors to the MANET working group.  This document was derived from <a href="#I-D.ietf-manet-dlep-da-credit-extension" class="xref">[I-D.ietf-manet-dlep-da-credit-extension]</a> as a result of discussions at IETF 101. Many useful comments were received from contributors to the MANET working group, notably Ronald in't Velt and David Black.  </p>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Bow-Nan Cheng</span> 
	  <span class="n hidden">
		<span class="family-name">Cheng</span>
	  </span>
	</span>
	<span class="org vcardline">MIT Lincoln Laboratory</span>
	<span class="adr">
	  <span class="vcardline">Massachusetts Institute of Technology</span>
<span class="vcardline">244 Wood Street</span>

	  <span class="vcardline">
		<span class="locality">Lexington</span>,  
		<span class="region">MA</span> 
		<span class="code">02421-6426</span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:bcheng@ll.mit.edu">bcheng@ll.mit.edu</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">David Wiggins</span> 
	  <span class="n hidden">
		<span class="family-name">Wiggins</span>
	  </span>
	</span>
	<span class="org vcardline">MIT Lincoln Laboratory</span>
	<span class="adr">
	  <span class="vcardline">Massachusetts Institute of Technology</span>
<span class="vcardline">244 Wood Street</span>

	  <span class="vcardline">
		<span class="locality">Lexington</span>,  
		<span class="region">MA</span> 
		<span class="code">02421-6426</span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:David.Wiggins@ll.mit.edu">David.Wiggins@ll.mit.edu</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Lou Berger</span> 
	  <span class="n hidden">
		<span class="family-name">Berger</span>
	  </span>
	</span>
	<span class="org vcardline">LabN Consulting, L.L.C.</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:lberger@labn.net">lberger@labn.net</a></span>

  </address>
</div>

</body>
</html>
